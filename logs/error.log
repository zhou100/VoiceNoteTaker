[2025-01-07 21:18:43,506] ERROR in app [in d:\projects\voice_taker\VoiceNoteTaker-1\app.py:198]:
Unhandled exception: name 'app' is not defined
Traceback (most recent call last):
  File "d:\projects\voice_taker\VoiceNoteTaker-1\app.py", line 73, in decorated_function
    log_api_call(endpoint_name, duration_ms, response.status_code)
                                             ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask_httpauth.py", line 174, in decorated
    return self.ensure_sync(f)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask_limiter\extension.py", line 1298, in __inner
    return cast(R, flask.current_app.ensure_sync(obj)(*a, **k))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\projects\voice_taker\VoiceNoteTaker-1\app.py", line 77, in decorated_function
    log_api_call(endpoint_name, duration_ms, 500, str(e))
  File "d:\projects\voice_taker\VoiceNoteTaker-1\logging_config.py", line 70, in log_api_call
    app.logger.log(level, message)
    ^^^
NameError: name 'app' is not defined

[2025-01-07 21:23:56,619] ERROR in app [in d:\projects\voice_taker\VoiceNoteTaker-1\app.py:202]:
[Request ID: [Request ID: [Request ID: ] ] ] Unhandled exception: name 'current_app' is not defined
Traceback (most recent call last):
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask_httpauth.py", line 174, in decorated
    return self.ensure_sync(f)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask_limiter\extension.py", line 1298, in __inner
    return cast(R, flask.current_app.ensure_sync(obj)(*a, **k))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\projects\voice_taker\VoiceNoteTaker-1\app.py", line 69, in decorated_function
    current_app.logger.info(f"[{request_id}] Starting {endpoint_name} request")
    ^^^^^^^^^^^
NameError: name 'current_app' is not defined. Did you mean: 'current_dir'?

[2025-01-07 21:41:11,123] ERROR in app [in d:\projects\voice_taker\VoiceNoteTaker-1\app.py:203]:
[Request ID: [Request ID: [Request ID: ] ] ] Unhandled exception: name 'app' is not defined
Traceback (most recent call last):
  File "d:\projects\voice_taker\VoiceNoteTaker-1\app.py", line 76, in decorated_function
    log_api_call(endpoint_name, duration_ms, response)
  File "d:\projects\voice_taker\VoiceNoteTaker-1\logging_config.py", line 91, in log_api_call
    app.logger.log(level, message)
    ^^^
NameError: name 'app' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask_httpauth.py", line 174, in decorated
    return self.ensure_sync(f)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask_limiter\extension.py", line 1298, in __inner
    return cast(R, flask.current_app.ensure_sync(obj)(*a, **k))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\projects\voice_taker\VoiceNoteTaker-1\app.py", line 81, in decorated_function
    log_api_call(endpoint_name, duration_ms, (error_response, 500))
  File "d:\projects\voice_taker\VoiceNoteTaker-1\logging_config.py", line 91, in log_api_call
    app.logger.log(level, message)
    ^^^
NameError: name 'app' is not defined

[2025-01-08 00:05:51,797] ERROR in app [in d:\projects\voice_taker\VoiceNoteTaker-1\app.py:74]:
[Request ID: [Request ID: [Request ID: ] ] ] [20250108000551-5d9737e6] Error in paraphrase request. Duration: 0.00s
Traceback (most recent call last):
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\werkzeug\wrappers\request.py", line 611, in get_json
    rv = self.json_module.loads(data)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\json\provider.py", line 187, in loads
    return json.loads(s, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "d:\projects\voice_taker\VoiceNoteTaker-1\app.py", line 61, in decorated_function
    response = f(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^
  File "d:\projects\voice_taker\VoiceNoteTaker-1\app.py", line 170, in get_paraphrase
    text = request.json.get("text")
           ^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\werkzeug\wrappers\request.py", line 560, in json
    return self.get_json()
           ^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\werkzeug\wrappers\request.py", line 620, in get_json
    rv = self.on_json_loading_failed(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\wrappers.py", line 214, in on_json_loading_failed
    return super().on_json_loading_failed(e)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\werkzeug\wrappers\request.py", line 645, in on_json_loading_failed
    raise BadRequest(f"Failed to decode JSON object: {e}")
werkzeug.exceptions.BadRequest: 400 Bad Request: Failed to decode JSON object: Expecting value: line 1 column 1 (char 0)

[2025-01-08 00:05:51,799] ERROR in app [in d:\projects\voice_taker\VoiceNoteTaker-1\app.py:218]:
[Request ID: [Request ID: [Request ID: ] ] ] Unhandled exception: 400 Bad Request: Failed to decode JSON object: Expecting value: line 1 column 1 (char 0)
Traceback (most recent call last):
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\werkzeug\wrappers\request.py", line 611, in get_json
    rv = self.json_module.loads(data)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\json\provider.py", line 187, in loads
    return json.loads(s, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask_httpauth.py", line 174, in decorated
    return self.ensure_sync(f)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask_limiter\extension.py", line 1298, in __inner
    return cast(R, flask.current_app.ensure_sync(obj)(*a, **k))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\projects\voice_taker\VoiceNoteTaker-1\app.py", line 61, in decorated_function
    response = f(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^
  File "d:\projects\voice_taker\VoiceNoteTaker-1\app.py", line 170, in get_paraphrase
    text = request.json.get("text")
           ^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\werkzeug\wrappers\request.py", line 560, in json
    return self.get_json()
           ^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\werkzeug\wrappers\request.py", line 620, in get_json
    rv = self.on_json_loading_failed(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\wrappers.py", line 214, in on_json_loading_failed
    return super().on_json_loading_failed(e)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\werkzeug\wrappers\request.py", line 645, in on_json_loading_failed
    raise BadRequest(f"Failed to decode JSON object: {e}")
werkzeug.exceptions.BadRequest: 400 Bad Request: Failed to decode JSON object: Expecting value: line 1 column 1 (char 0)

[2025-01-08 00:06:24,434] ERROR in app [in d:\projects\voice_taker\VoiceNoteTaker-1\app.py:206]:
[Request ID: [Request ID: [Request ID: ] ] ] [20250108000624-b0938937] Error processing request: 400 Bad Request: Failed to decode JSON object: Expecting value: line 1 column 1 (char 0)
Traceback (most recent call last):
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\werkzeug\wrappers\request.py", line 611, in get_json
    rv = self.json_module.loads(data)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\json\provider.py", line 187, in loads
    return json.loads(s, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "d:\projects\voice_taker\VoiceNoteTaker-1\app.py", line 174, in get_paraphrase
    data = request.get_json()
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\werkzeug\wrappers\request.py", line 620, in get_json
    rv = self.on_json_loading_failed(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\wrappers.py", line 214, in on_json_loading_failed
    return super().on_json_loading_failed(e)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\werkzeug\wrappers\request.py", line 645, in on_json_loading_failed
    raise BadRequest(f"Failed to decode JSON object: {e}")
werkzeug.exceptions.BadRequest: 400 Bad Request: Failed to decode JSON object: Expecting value: line 1 column 1 (char 0)

[2025-01-08 00:06:30,040] ERROR in app [in d:\projects\voice_taker\VoiceNoteTaker-1\app.py:178]:
[Request ID: [Request ID: [Request ID: ] ] ] [20250108000630-c6532642] No text provided
[2025-01-08 12:58:13,646] ERROR in app [in d:\projects\voice_taker\VoiceNoteTaker-1\app.py:172]:
[Request ID: [Request ID: [Request ID: ] ] ] [20250108125813-a2a24044] No text provided
[2025-01-08 13:05:01,948] ERROR in app [in d:\projects\voice_taker\VoiceNoteTaker-1\app.py:172]:
[Request ID: [Request ID: [Request ID: ] ] ] [20250108130501-6495a446] No text provided
[2025-01-08 13:55:33,855] ERROR in app [in D:\projects\voice_taker\VoiceNoteTaker-1\app.py:362]:
[Request ID: [Request ID: [Request ID: ] ] ] Unhandled exception: 405 Method Not Allowed: The method is not allowed for the requested URL.
Traceback (most recent call last):
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\app.py", line 891, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\app.py", line 500, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\werkzeug\routing\map.py", line 624, in match
    raise MethodNotAllowed(valid_methods=list(e.have_match_for)) from None
werkzeug.exceptions.MethodNotAllowed: 405 Method Not Allowed: The method is not allowed for the requested URL.

[2025-01-08 13:58:51,133] ERROR in app [in D:\projects\voice_taker\VoiceNoteTaker-1\app.py:331]:
[Request ID: [Request ID: [Request ID: ] ] ] [20250108135851-55a4078b] Error cleaning up temporary files: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\projects\\voice_taker\\VoiceNoteTaker-1\\temp\\temp_20250108135851-55a4078b'
[2025-01-08 13:58:51,156] ERROR in app [in D:\projects\voice_taker\VoiceNoteTaker-1\app.py:334]:
[Request ID: [Request ID: [Request ID: ] ] ] [20250108135851-55a4078b] Error processing audio file: [WinError 2] The system cannot find the file specified
Traceback (most recent call last):
  File "D:\projects\voice_taker\VoiceNoteTaker-1\app.py", line 305, in transcribe_with_time
    audio = AudioSegment.from_file(temp_path)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\pydub\audio_segment.py", line 728, in from_file
    info = mediainfo_json(orig_file, read_ahead_limit=read_ahead_limit)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujun\AppData\Roaming\Python\Python312\site-packages\pydub\utils.py", line 274, in mediainfo_json
    res = Popen(command, stdin=stdin_parameter, stdout=PIPE, stderr=PIPE)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
  File "C:\Python312\Lib\subprocess.py", line 1538, in _execute_child
    hp, ht, pid, tid = _winapi.CreateProcess(executable, args,
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
FileNotFoundError: [WinError 2] The system cannot find the file specified

